<?php  echo get_sidebar( "top" ); ?>
 <link rel="stylesheet" href="<?php echo get_template_directory_uri(); ?>/assets/css/top.css">
  <?php 
        query_posts('pagename=home-jp');
        while ( have_posts() ) : the_post();
            $banner = SCF::get('banner_home_jp');
            $group_image = SCF::get('Image-Home-JP');
            $count_items = is_array($group_image) && count($group_image) === 1;

        endwhile;
    ?>
        
                 <div class="container controll__body">
            <div class="first__image">
                <img src="<?php echo wp_get_attachment_url($banner); ?>" alt="">
            </div>
            <div class="controll__top__courses text-center position-relative">
                <p class="border__courses__left position-absolute"></p>
                <p class="text-uppercase fw-bold top__font">
                    top course
                </p>
                <p class="border__courses__right position-absolute"></p>
            </div>
            <div class="weather__page text-center mb-5 mt-5">
                <div class="video-container">
                    <?php
                        $content = apply_filters('the_content', get_the_content());
                        $video_shortcode = '';
                        if (preg_match('/<video[^>]*>(.*?)<\/video>/is', $content, $matches)) {
                            $video_shortcode = $matches[0];
                        }
                        if (!empty($content)) {
                            ?>
                               <video autoplay muted loop>
                                    <source src="<?php echo $video_shortcode; ?></source>
                                </video>
                            <?php 
                        } else {
                            echo '<p>No video found in the content.</p>';
                        }
                    ?>
                </div>
            </div>
                <!-- Slide -->
                <div class="slide__top___page mt-5 mb-5" <?php echo $count_items ? 'style="height: auto;"' : ''; ?>">
                <div class="swiper">
                    <div class="swiper-wrapper"  id="">
                        <!-- Slide 1 -->
                        <?php 
                            function isHome($list_img){
                                foreach ($list_img as $val){
                                    if(!empty($val['imagehomejp'])){
                                        return false;
                                    }
                                }
                                return true;
                            }
                            $show_img = isHome($group_image) ? 'display:none' : '';
                        ?>

                        <?php
                            foreach($group_image as $element){
                                ?>
                                    <div class="swiper-slide position-relative" style="<?php echo $show_img; ?>">
                                        <div class="zoom__picture">
                                            <div class="d-flex gap-3" id="control__picture">
                                                <?php for ($i = 0; $i < 18; $i++ ): ?>
                                                    <p class="circle__photo"></p>
                                                <?php endfor; ?>
                                            </div>
                                            <div>
                                                <div>
                                                    <img class="img_top_page" src="<?php echo wp_get_attachment_url($element['imagehomejp']); ?>" alt="Child with colorful hands">
                                                        <div class="control_visit">
                                                        <div class=" d-flex justify-content-center h-100 align-items-center">
                                                            <a href="<?php echo get_site_url(); ?>/tourlist">
                                                                <p class=" visit__us text-white p-2 fw-normal rounded-pill" style="display: none;">ツアー一覧</p>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="circle__bottom" id="control__picture__bottom">
                                                <div class="d-flex gap-3" id="padding_icon">
                                                <?php for ($i = 0; $i < 18; $i++ ): ?>
                                                    <p class="circle__photo"></p>
                                                <?php endfor; ?>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <?php 
                            }
                        ?>
                    </div>
                </div>
            </div>
            <!-- End Slide -->
        </div>
        </div>  

 <?php multi_footers();?>


<script>
    var swiper = new Swiper('.swiper', {
        slidesPerView: 1,
        centeredSlides: true,
        spaceBetween: 0,
        loop: true,
        autoplay: true,
        breakpoints: {
            475: {
                slidesPerView: 3,
            },
            640: {
                slidesPerView: 3,
            },
            768: {
                slidesPerView: 3,
            },
            1024: {
                slidesPerView: 3,
            },
        },
    });

    swiper.on('click', function () {
        var activeSlide = swiper.slides[swiper.activeIndex];
        var clickedSlide = swiper.slides[swiper.clickedIndex];

        if (swiper.clickedIndex < swiper.activeIndex) {
            swiper.slidePrev();
        } else if (swiper.clickedIndex > swiper.activeIndex) {
            swiper.slideNext();
        }
    });
</script>

 <!-- =========================
    INTRO SECTION  From Costom 
============================== -->
 <?php 
  $pages = get_pages(); 
  foreach ( $pages as $page ) {
    $option = $page->post_title;
    if( $option =="home"){
        $mypost = $page-> post_content;
        echo $mypost;}
  }
 ?>

 <!-- =========================
    VENUE SECTION   
============================== -->